<?xml version="1.0" encoding="utf-8"?>

<odoo>
    <data noupdate="1">

        <!-- Workflow -->

        <!-- Internal -->

        <!-- internal deprecate -->

        <record id="document_rule_internal_deprecate" model="document.workflow.rule">
            <field name="name">Deprecate</field>
            <field name="sequence">7</field>
            <field name="remove_activities">True</field>
            <field name="domain" eval="['|', ('tag_ids', '=', False), ('tag_ids', 'in', [
                ref('document.document_internal_status_validated'),
                ref('document.document_internal_status_tc')])]"/>
            <field name="domain_folder_id" ref="document_internal_folder"/>
        </record>

        <record id="document_workflow_action_deprecate" model="document.workflow.action">
            <field name="workflow_rule_id" ref="document_rule_internal_deprecate"/>
            <field name="action">replace</field>
            <field name="facet_id" ref="document.document_internal_status"/>
            <field name="tag_id" ref="document.document_internal_status_deprecated"/>
        </record>

        <!-- internal mark as draft -->

        <record id="document_rule_internal_mad" model="document.workflow.rule">
            <field name="name">Mark As Draft</field>
            <field name="sequence">5</field>
            <field name="condition_type">domain</field>
            <field name="domain" eval="['|', ('tag_ids', '=', False), ('tag_ids', 'in', [
                ref('document.document_internal_status_deprecated'),
                ref('document.document_internal_status_tc')])]"/>
            <field name="remove_activities">True</field>
            <field name="domain_folder_id" ref="document_internal_folder"/>
        </record>

        <record id="document_workflow_action_mad" model="document.workflow.action">
            <field name="workflow_rule_id" ref="document_rule_internal_mad"/>
            <field name="action">replace</field>
            <field name="facet_id" ref="document.document_internal_status"/>
            <field name="tag_id" ref="document.document_internal_status_inbox"/>
        </record>

        <!-- internal ask for validation -->

        <record id="document_rule_internal_legal" model="document.workflow.rule">
            <field name="name">Send to Legal</field>
            <field name="sequence">5</field>
            <field name="condition_type">domain</field>
            <field name="domain" eval="[('tag_ids', 'in', [
                ref('document.document_internal_status_inbox'),
                ref('document.document_internal_status_validated')])]"/>
            <field name="domain_folder_id" ref="document.document_internal_folder"/>
            <field name="activity_option">True</field>
            <field name="activity_type_id" ref="document.mail_document_activity_data_tv"/>
        </record>

        <record id="document_workflow_action_afv" model="document.workflow.action">
            <field name="workflow_rule_id" ref="document_rule_internal_legal"/>
            <field name="action">replace</field>
            <field name="facet_id" ref="document.document_internal_status"/>
            <field name="tag_id" ref="document.document_internal_status_tc"/>
        </record>

        <record id="document_workflow_action_afv_legal" model="document.workflow.action">
            <field name="workflow_rule_id" ref="document_rule_internal_legal"/>
            <field name="action">add</field>
            <field name="facet_id" ref="document.document_internal_knowledge"/>
            <field name="tag_id" ref="document.document_internal_knowledge_legal"/>
        </record>

        <!-- internal mark as bill -->

        <record id="document_rule_internal_mark" model="document.workflow.rule">
            <field name="sequence">2</field>
            <field name="name">Mark As Bill</field>
            <field name="condition_type">domain</field>
            <field name="domain" eval="[('tag_ids', 'in', [
                ref('document.document_internal_status_tc'),
                ref('document.document_internal_status_inbox')])]"/>
            <field name="remove_activities">True</field>
            <field name="domain_folder_id" ref="document.document_internal_folder"/>
            <field name="folder_id" ref="document.document_finance_folder"/>
        </record>

        <record id="document_workflow_action_mark_inbox" model="document.workflow.action">
            <field name="workflow_rule_id" ref="document_rule_internal_mark"/>
            <field name="action">add</field>
            <field name="facet_id" ref="document.document_finance_status"/>
            <field name="tag_id" ref="document.document_finance_status_inbox"/>
        </record>

        <record id="document_workflow_action_mark_bill" model="document.workflow.action">
            <field name="workflow_rule_id" ref="document_rule_internal_mark"/>
            <field name="action">add</field>
            <field name="facet_id" ref="document.document_finance_document"/>
            <field name="tag_id" ref="document.document_finance_document_bill"/>
        </record>

        <!-- Finance -->

        <!-- finance validate -->

        <record id="document_rule_finance_validate" model="document.workflow.rule">
            <field name="sequence">6</field>
            <field name="name">Validate</field>
            <field name="condition_type">domain</field>
            <field name="domain" eval="[('tag_ids', 'in', [
                ref('document.document_finance_status_tc'),
                ref('document.document_finance_status_inbox')])]"/>
            <field name="remove_activities">True</field>
            <field name="domain_folder_id" ref="document.document_finance_folder"/>
        </record>

        <record id="document_workflow_action_finance_validate" model="document.workflow.action">
            <field name="workflow_rule_id" ref="document_rule_finance_validate"/>
            <field name="action">replace</field>
            <field name="facet_id" ref="document.document_finance_status"/>
            <field name="tag_id" ref="document.document_finance_status_validated"/>
        </record>

        <!-- finance ask for validation -->

        <record id="document_rule_finance_afv" model="document.workflow.rule">
            <field name="sequence">7</field>
            <field name="name">Ask for Validation</field>
            <field name="condition_type">domain</field>
            <field name="domain" eval="[('tag_ids', 'in', [
                ref('document.document_finance_status_inbox'),
                ref('document.document_finance_status_validated')])]"/>
            <field name="domain_folder_id" ref="document_finance_folder"/>
            <field name="activity_option">True</field>
            <field name="activity_type_id" ref="document.mail_document_activity_data_tv"/>
            <field name="domain_folder_id" ref="document.document_finance_folder"/>
        </record>

        <record id="document_workflow_action_finance_afv" model="document.workflow.action">
            <field name="workflow_rule_id" ref="document_rule_finance_afv"/>
            <field name="action">replace</field>
            <field name="facet_id" ref="document.document_finance_status"/>
            <field name="tag_id" ref="document.document_finance_status_tc"/>
        </record>

        <!-- finance move to inbox -->

        <record id="document_rule_finance_mti" model="document.workflow.rule">
            <field name="sequence">7</field>
            <field name="name">Move To Inbox</field>
            <field name="condition_type">domain</field>
            <field name="domain" eval="['|', ('tag_ids', '=', False), ('tag_ids', 'in', [
                ref('document.document_finance_status_validated')])]"/>
            <field name="domain_folder_id" ref="document_finance_folder"/>
            <field name="activity_option">True</field>
            <field name="activity_type_id" ref="document.mail_document_activity_data_tv"/>
            <field name="domain_folder_id" ref="document.document_finance_folder"/>
        </record>

        <record id="document_workflow_action_finance_mti" model="document.workflow.action">
            <field name="workflow_rule_id" ref="document_rule_finance_mti"/>
            <field name="action">replace</field>
            <field name="facet_id" ref="document.document_finance_status"/>
            <field name="tag_id" ref="document.document_finance_status_inbox"/>
        </record>

        <!-- finance set as 2018 contract-->

        <record id="document_rule_finance_2018contracts" model="document.workflow.rule">
            <field name="sequence">8</field>
            <field name="name" eval="'Set As ' + str(datetime.now().year) + ' Contracts'"/>
            <field name="domain_folder_id" ref="document_finance_folder"/>
            <field name="required_tag_ids" eval="[(4, ref('document.document_finance_status_inbox'))]"/>
            <field name="activity_option">True</field>
            <field name="activity_type_id" ref="document.mail_document_activity_data_tv"/>
            <field name="domain_folder_id" ref="document.document_finance_folder"/>
        </record>

        <record id="document_workflow_action_finance_status_validated" model="document.workflow.action">
            <field name="workflow_rule_id" ref="document_rule_finance_2018contracts"/>
            <field name="action">replace</field>
            <field name="facet_id" ref="document.document_finance_status"/>
            <field name="tag_id" ref="document.document_finance_status_validated"/>
        </record>

        <record id="document_workflow_action_finance_2018contracts" model="document.workflow.action">
            <field name="workflow_rule_id" ref="document_rule_finance_2018contracts"/>
            <field name="action">replace</field>
            <field name="facet_id" ref="document.document_finance_fiscal_year"/>
            <field name="tag_id" ref="document.document_finance_fiscal_year_2018"/>
        </record>

        <record id="document_workflow_action_finance_DocumentContract" model="document.workflow.action">
            <field name="workflow_rule_id" ref="document_rule_finance_2018contracts"/>
            <field name="action">replace</field>
            <field name="facet_id" ref="document.document_finance_document"/>
            <field name="tag_id" ref="document.document_finance_document_Contracts"/>
        </record>

    </data>
</odoo>
