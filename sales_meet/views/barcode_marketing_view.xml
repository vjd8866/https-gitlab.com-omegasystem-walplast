<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>

        <record id="view_barcode_marketing_form" model="ir.ui.view">
            <field name="name">barcode.marketing.form</field>
            <field name="model">barcode.marketing</field>
            <field name="arch" type="xml">
                <form>
                    <header><field name="state" widget="statusbar"/></header>
                    <sheet>
                        <h2><field name="name" states='generated,print'  attrs="{'readonly': [('state', '!=', 'draft')]}"/></h2>
                        <group col="4" colspan="4">
                            <field name="date"  attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                            <field name="barcode" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                            <field name="amount" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                            <field name="handling_charge" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                            <field name="product_name" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                            <field name="report" filename="name" states='print'/>
                        </group>
                        <group>
                            <button name="generate_barcode" string="Generate Barcode" type="object" class="btn-primary" states='draft'/>
                            <button name="print_report" string="Print Report" type="object" class="btn-primary" states='generated'/>
                        </group>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>


        <record id="view_barcode_marketing_tree" model="ir.ui.view">
            <field name="name">barcode.marketing.tree</field>
            <field name="model">barcode.marketing</field>
            <field name="arch" type="xml">
                <tree >
                    <field name="name" />
                    <field name="date"/>
                    <field name="barcode"/>
                    <field name="amount" />
                </tree>
            </field>
        </record>

        <record id="action_barcode_marketing" model="ir.actions.act_window">
            <field name="name">QR Code</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">barcode.marketing</field>
            <field name="binding_view_types">form</field>
            <field name="view_mode">tree,form</field>
        </record>


        <record id="view_barcode_marketing_line_form" model="ir.ui.view">
            <field name="name">barcode.marketing.line.form</field>
            <field name="model">barcode.marketing.line</field>
            <field name="arch" type="xml">
                <form create="false" edit="false" >
                    <header>
                        <button name="set_to_draft" string="Set To Draft" type="object"  class="btn-primary"
                                groups="sales_meet.group_it_user" />

                        <button name="generate_qr_code" string="QR" type="object"  class="btn-primary"/>

                        <field name="state" widget="statusbar" readonly="1" statusbar_visible="draft"/>
                    </header>
                    <sheet>
                        <field name="qr_code" widget="image" class="oe_avatar" attrs="{'invisible': [('qr_code', '=', False)]}"
                               style="padding-right: 25px;" />

                        <h2><field name="name" style="font-weight: bold; color: black;"/></h2>
                        <group col="4" colspan="4">
                            <field name="date"/>
                            <field name="amount" />
                            <field name="partner_id" />
                            <field name="user_id" />
                            <field name="barcode_marketing_id" string="Sheet ID"/>
                            <field name="updated_date" />
                            <field name="barcode_check_id" />
                            <field name="updated_datetime" />
                            <field name="product_name" />
                            <field name="handling_charge" />
                        </group>

                        <notebook>

                            <page string="Mobile App Details" name="mobile_details" >
                                <group col="4" colspan="4">
                                    <field name="mobile_bool" />
                                    <field name="retailer_scanned" />
                                    <field name="distributor_scanned" />
                                    <field name="employee_scanned" />
                                    <field name="distributor_paid_bool" />
                                    <field name="amount_validated" />
                                    <field name="distributor_paid_date" />
                                    <field name="cn_raised_date" />
                                </group>
                            </page>

                            <page string="Second Scan Details" name="other_details" >
                                <group col="4" colspan="4">
                                    <field name="second_flag" />
                                    <field name="partner_id2" />
                                    <field name="user_id2" />
                                    <field name="barcode_check2_id" />
                                    <field name="scanned_date2" />
                                    <field name="scanned_datetime2" />
                                    <field name="distributor_paid_bool2" />
                                    <field name="distributor_paid_date2" />
                                    <field name="amount_validated2" />
                                    <field name="cn_raised_date2" />
                                </group>
                            </page>

                            <page string="Recheck Details" name="recheck_details" >
                                <group col="4" colspan="4">
                                    <field name="recheck_bool" string="Recheck Flag"/>
                                    <field name="rechecked_date" />
                                    <field name="barcode_recheck_id" />
                                    <field name="flag" />
                                    <field name="sequence_no" invisible="1"/>
                                </group>
                            </page>
                        </notebook>

                    </sheet>
                </form>
            </field>
        </record>

        <record id="view_barcode_marketing_line_tree" model="ir.ui.view">
            <field name="name">barcode.marketing.line.tree</field>
            <field name="model">barcode.marketing.line</field>
            <field name="arch" type="xml">
                <tree create="false" >
                    <field name="name" />
                    <field name="sequence_no" invisible="1"/>
                    <field name="amount" string="Worth"/>
                    <field name="partner_id" string="Customer"/>
                    <field name="user_id" string="User"/>
                    <field name="flag" />
                    <field name="date" invisible="0"/>
                    <field name="barcode_check_id" />
                    <field name="updated_date" />
                    <field name="state" />
                    <field name="barcode_marketing_id" string="Sheet ID" invisible="1"/>
                </tree>
            </field>
        </record>

        <record id="view_barcode_marketing_line_search" model="ir.ui.view">
            <field name="name">barcode.marketing.line.search</field>
            <field name="model">barcode.marketing.line</field>
            <field name="arch" type="xml">
                <search string="Qr Lines">
                    <field name="name"/>
                    <field name="partner_id" />
                    <field name="state" />
                    <field name="barcode_marketing_id" />
                    <separator/>
                    <filter name="flag" string="Updated Flag" domain="[('flag','=',True)]"/>
                    <group expand="0" string="Group By">
                        <filter name="qr_scan" string="QR Scan" domain="[]" context="{'group_by':'barcode_check_id'}"/>
                        <filter name="partner" string="Partner" domain="[]" context="{'group_by':'partner_id'}"/>
                        <filter name="amount" string="Amount" domain="[]" context="{'group_by':'amount'}"/>
                        <filter name="upload_flag" string="Updated Flag" domain="[]" context="{'group_by':'flag'}"/>
                        <filter name="status" string="Status" domain="[]" context="{'group_by':'state'}"/>
                        <filter name="barcode_master" string="Barcode Master" domain="[]" context="{'group_by':'barcode_marketing_id'}"/>

                    </group>
                </search>
            </field>
        </record>

        <record id="action_barcode_marketing_line" model="ir.actions.act_window">
            <field name="name">QR Code Lines</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">barcode.marketing.line</field>
            <field name="binding_view_types">form</field>
            <field name="view_mode">tree,form</field>
            <field name="search_view_id" ref="view_barcode_marketing_line_search"/>
        </record>

        <record id="view_barcode_marketing_check_form" model="ir.ui.view">
            <field name="name">barcode.marketing.check.form</field>
            <field name="model">barcode.marketing.check</field>
            <field name="arch" type="xml">
                <form >
                    <header>
                        <button name="update_records" string="Update" type="object" class="btn-primary"
                                attrs="{'invisible': [('recheck_bool', '=', True)]}" />
                        <button name="recheck_records" string="Recheck" type="object" class="btn-primary"
                                attrs="{'invisible': ['|',('recheck_bool', '!=', True),('state', '=', 'recheck')]}"/>
                        <button name="set_to_draft" string="Set To Draft" type="object" class="btn-primary"
                                groups="sales_meet.group_barcode_marketing_manager"
                                attrs="{'invisible': [('state', 'in', ('draft','update' ,'cn_raised') )]}"/>

                        <field name="state" widget="statusbar" statusbar_visible="draft"/>
                    </header>
                    <sheet>

                        <h1><field name="name"  states='create' /></h1>
                        <group>
                            <field name="recheck_bool" string="Coupon Recheck" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                        </group>
                        <group>
                            <h1>
                                <field name="barcode" id="codes" attrs="{'readonly': [('state', '!=', 'draft')]}" style="width: 100%; font-size: 50px;"/>

                                <button name="clear_records" string="Clear" type="object" class="btn-primary"  states='draft'/>
                            </h1>
                        </group>
                        <group>
                            <group col="4">
                                <field name="flag" invisible="1"/>
                                <!--                            <field name="qr_check"/>-->
                                <field name="accepted_count" />
                                <field name="count_accepted" invisible="1"/>
                                <field name="date" invisible="1"/>
                                <field name="flag" />
                                <field name="manual_count" attrs="{'invisible': [('recheck_bool', '=', True)]}"/>
                                <field name="accepted" attrs="{'readonly': [('state', '!=', 'draft')],'invisible': [('flag', '=', False)]}"/>
                            </group>
                            <group col="4">
                                <field name="rejected_count" />
                                <field name="count_rejected" invisible="1" />
                                <field name="partner_id"
                                       attrs="{'readonly': [('state', '!=', 'draft')],'invisible': [('recheck_bool', '=', True)]}"/>
                                <field name="amount"  attrs="{'readonly': [('state', '!=', 'draft')]}" />
                                <field name="rejected" id="rejected_output"
                                       attrs="{'readonly': [('state', '!=', 'draft')],'invisible': [('flag', '=', False)]}"/>
                            </group>
                        </group>
                        <group attrs="{'invisible': [('recheck_bool', '=', True)]}" >
                            <group><field name="charge"  attrs="{'readonly': [('state', '!=', 'draft')]}" /></group>
                            <group   name="sale_total">
                                <field name="total_amount"  widget="monetary" />
                                <field name="mobile_bool" invisible="1" />
                            </group>
                        </group>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>


        <record id="view_barcode_marketing_check_tree" model="ir.ui.view">
            <field name="name">barcode.marketing.check.tree</field>
            <field name="model">barcode.marketing.check</field>
            <field name="arch" type="xml">
                <tree  decoration-danger="state=='draft'" decoration-success="state=='cn_raised'" decoration-info="state=='create'"
                       decoration-muted="state=='reject'" decoration-bf="state=='update'">
                    <field name="name" />
                    <field name="create_date" />
                    <field name="count_accepted" sum="Total"/>
                    <!-- <field name="count_rejected" /> -->
                    <field name="manual_count" />
                    <field name="total_amount" sum="Total Amount"/>
                    <field name="partner_id" />
                    <field name="imported" />
                    <field name="user_id" />
                    <field name="state" />
                </tree>
            </field>
        </record>

        <record id="view_barcode_marketing_check_search" model="ir.ui.view">
            <field name="name">barcode.marketing.check.search</field>
            <field name="model">barcode.marketing.check</field>
            <field name="arch" type="xml">
                <search string="Qr Scan">
                    <field name="name"/>
                    <field name="partner_id" />
                    <field name="imported" />
                    <field name="user_id" />
                    <field name="state" />
                    <separator/>
                    <filter name="mobile_bool" string="Mobile Scan" domain="[('mobile_bool','=',True)]"/>
                    <group expand="0" string="Group By">
                        <filter name="user" string="User" domain="[]" context="{'group_by':'user_id'}"/>
                        <filter name="partner" string="Partner" domain="[]" context="{'group_by':'partner_id'}"/>
                        <filter name="status" string="Status" domain="[]" context="{'group_by':'state'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record id="action_barcode_marketing_check" model="ir.actions.act_window">
            <field name="name">QR Code Scan</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">barcode.marketing.check</field>
            <field name="binding_view_types">form</field>
            <field name="domain">[('mobile_bool','=',False)]</field>
            <field name="context">{'default_mobile_bool':False,}</field>
            <field name="view_mode">tree,form</field>
            <field name="search_view_id" ref="view_barcode_marketing_check_search"/>
        </record>


        <record model="ir.actions.act_url" id="action_qr_scan_web">

            <field name="name">Web QR Scan (HO)</field>

            <field name="url">https://walplast.in/qr/ho/scan</field>

            <field name="target">new</field>

        </record>

    </data>
</odoo>